function changeSearchType(e,t){TipUtil.removeTip();var r=$("#car-type-search-input");switch(r.val(""),$(".choose-style").removeClass("choose-style"),$(t).addClass("choose-style"),e){case 0:r.unbind("keyup"),r.attr("placeholder",_keywordSearchPlaceholder),r.removeAttr("maxlength");break;case 1:r.unbind("keyup").on("keyup",function(){$(this).val($(this).val().replace(/[\u4E00-\u9FA5]/g,""))}),r.attr("placeholder",_oeSearchPlaceholder),r.removeAttr("maxlength");break;default:r.unbind("keyup").on("keyup",function(){$(this).val($(this).val().replace(/[\u4E00-\u9FA5]/g,""))}),r.attr("placeholder",_vinSearchPlaceholder),r.attr("maxlength",_vinLength)}r.focus()}function carSearch(){var e=$("#car-type-search-input");TipUtil.destroyTip(e);var t=Number($(".choose-style").attr("data-type")),r=e.val().trim();if(0==t){if(""==r)return TipUtil.tooltipFun(e,_keywordSearchTip,"bottom"),!1;window.location.href="/autoParts/goods/keyword?q="+r}if(1==t){if(""==r)return TipUtil.tooltipFun(e,_oeSearchTip,"bottom"),!1;window.location.href="/autoParts/goods/oe?oem="+r}if(2==t){if(r=r.toUpperCase(),!EPC.isVin(r))return TipUtil.tooltipFun(e,_vinSearchTip,"bottom"),!1;JqAjax.post("/epc/car/getOnlineCarByVin",getVinResult,{vin:r})}}function getVinResult(e){var t=$("#car-type-search-input").val().trim(),r="/autoParts/category/category?carId=CARID&vinNumber="+t;if(e.success){var n=e.data;if(1==n.length)window.location.href=r.replace("CARID",n[0].id)+"&seriesId="+n[0].seriesId;else{var a=template("choose_car_template",{list:n});EPC.alertFuc(a),$(".choose_car").unbind("click").click(function(){var e=$(this).attr("data-id"),t=$(this).attr("data-sid");window.location.href=r.replace("CARID",e)+"&seriesId="+t})}}else EPC.alertFuc("很抱歉，未查询到您提交的车辆信息。");return!1}!function(){function e(e){return e.replace(y,"").replace(b,",").replace(k,"").replace(w,"").replace(_,"").split(C)}function t(e){return"'"+e.replace(/('|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")+"'"}function r(r,n){function a(e){return d+=e.split(/\n/).length-1,u&&(e=e.replace(/\s+/g," ").replace(/<!--[\w\W]*?-->/g,"")),e&&(e=g[1]+t(e)+g[2]+"\n"),e}function o(t){var r=d;if(s?t=s(t,n):i&&(t=t.replace(/\n/g,function(){return d++,"$line="+d+";"})),0===t.indexOf("=")){var a=p&&!/^=[=#]/.test(t);if(t=t.replace(/^=[=#]?|[\s;]*$/g,""),a){var o=t.replace(/\s*\([^\)]+\)/,"");f[o]||/^(include|print)$/.test(o)||(t="$escape("+t+")")}else t="$string("+t+")";t=g[1]+t+g[2]}return i&&(t="$line="+r+";"+t),m(e(t),function(e){if(e&&!$[e]){var t;t="print"===e?b:"include"===e?k:f[e]?"$utils."+e:h[e]?"$helpers."+e:"$data."+e,w+=e+"="+t+",",$[e]=!0}}),t+"\n"}var i=n.debug,c=n.openTag,l=n.closeTag,s=n.parser,u=n.compress,p=n.escape,d=1,$={$data:1,$filename:1,$utils:1,$helpers:1,$out:1,$line:1},v="".trim,g=v?["$out='';","$out+=",";","$out"]:["$out=[];","$out.push(",");","$out.join('')"],y=v?"$out+=text;return $out;":"$out.push(text);",b="function(){var text=''.concat.apply('',arguments);"+y+"}",k="function(filename,data){data=data||$data;var text=$utils.$include(filename,data,$filename);"+y+"}",w="'use strict';var $utils=this,$helpers=$utils.$helpers,"+(i?"$line=0,":""),_=g[0],C="return new String("+g[3]+");";m(r.split(c),function(e){e=e.split(l);var t=e[0],r=e[1];1===e.length?_+=a(t):(_+=o(t),r&&(_+=a(r)))});var E=w+_+C;i&&(E="try{"+E+"}catch(e){throw {filename:$filename,name:'Render Error',message:e.message,line:$line,source:"+t(r)+".split(/\\n/)[$line-1].replace(/^\\s+/,'')};}");try{var A=new Function("$data","$filename",E);return A.prototype=f,A}catch(R){throw R.temp="function anonymous($data,$filename) {"+E+"}",R}}var n=function(e,t){return"string"==typeof t?v(t,{filename:e}):i(e,t)};n.version="3.0.0",n.config=function(e,t){a[e]=t};var a=n.defaults={openTag:"<%",closeTag:"%>",escape:!0,cache:!0,compress:!1,parser:null},o=n.cache={};n.render=function(e,t){return v(e,t)};var i=n.renderFile=function(e,t){var r=n.get(e)||$({filename:e,name:"Render Error",message:"Template not found"});return t?r(t):r};n.get=function(e){var t;if(o[e])t=o[e];else if("object"==typeof document){var r=document.getElementById(e);if(r){var n=(r.value||r.innerHTML).replace(/^\s*|\s*$/g,"");t=v(n,{filename:e})}}return t};var c=function(e,t){return"string"!=typeof e&&(t=typeof e,"number"===t?e+="":e="function"===t?c(e.call(e)):""),e},l={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},s=function(e){return l[e]},u=function(e){return c(e).replace(/&(?![\w#]+;)|[<>"']/g,s)},p=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},d=function(e,t){var r,n;if(p(e))for(r=0,n=e.length;n>r;r++)t.call(e,e[r],r,e);else for(r in e)t.call(e,e[r],r)},f=n.utils={$helpers:{},$include:i,$string:c,$escape:u,$each:d};n.helper=function(e,t){h[e]=t};var h=n.helpers=f.$helpers;n.onerror=function(e){var t="Template Error\n\n";for(var r in e)t+="<"+r+">\n"+e[r]+"\n\n";"object"==typeof console&&console.error(t)};var $=function(e){return n.onerror(e),function(){return"{Template Error}"}},v=n.compile=function(e,t){function n(r){try{return new l(r,c)+""}catch(n){return t.debug?$(n)():(t.debug=!0,v(e,t)(r))}}t=t||{};for(var i in a)void 0===t[i]&&(t[i]=a[i]);var c=t.filename;try{var l=r(e,t)}catch(s){return s.filename=c||"anonymous",s.name="Syntax Error",$(s)}return n.prototype=l.prototype,n.toString=function(){return l.toString()},c&&t.cache&&(o[c]=n),n},m=f.$each,g="break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined",y=/\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|\s*\.\s*[$\w\.]+/g,b=/[^\w$]+/g,k=new RegExp(["\\b"+g.replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g"),w=/^\d[^,]*|,\d[^,]*/g,_=/^,+|,+$/g,C=/^$|,+/;a.openTag="{{",a.closeTag="}}";var E=function(e,t){var r=t.split(":"),n=r.shift(),a=r.join(":")||"";return a&&(a=", "+a),"$helpers."+n+"("+e+a+")"};a.parser=function(e){e=e.replace(/^\s/,"");var t=e.split(" "),r=t.shift(),a=t.join(" ");switch(r){case"if":e="if("+a+"){";break;case"else":t="if"===t.shift()?" if("+t.join(" ")+")":"",e="}else"+t+"{";break;case"/if":e="}";break;case"each":var o=t[0]||"$data",i=t[1]||"as",c=t[2]||"$value",l=t[3]||"$index",s=c+","+l;"as"!==i&&(o="[]"),e="$each("+o+",function("+s+"){";break;case"/each":e="});";break;case"echo":e="print("+a+");";break;case"print":case"include":e=r+"("+t.join(",")+");";break;default:if(/^\s*\|\s*[\w\$]/.test(a)){var u=!0;0===e.indexOf("#")&&(e=e.substr(1),u=!1);for(var p=0,d=e.split("|"),f=d.length,h=d[p++];f>p;p++)h=E(h,d[p]);e=(u?"=":"=#")+h}else e=n.helpers[r]?"=#"+r+"("+t.join(",")+");":"="+e}return e},"function"==typeof define?define(function(){return n}):"undefined"!=typeof exports?module.exports=n:this.template=n}();var storage=window.sessionStorage,key="autoParts_crumbs";$(function(){var e="";switch(Number($(".choose-style").attr("data-type"))){case 1:e=_oeSearchPlaceholder;break;case 2:e=_vinSearchPlaceholder;break;default:e=_keywordSearchPlaceholder}$("#car-type-search-input").bind("keypress",function(e){13==e.keyCode&&$("#car-type-head-searchBtn").trigger("click")}).attr("placeholder",e)});var CANCEL_ORDER=function(){var e=function(e){void 0!=$(e)&&null!=$(e)&&$(e).modal("hide")},t=$("#alert_cancel_order"),r=function(e){void 0!=t&&(n(e),t.modal("show"))},n=function(e){var r=t.find("input[type=checkbox]");$("#acoOtherReason").val(""),$(r).prop("checked",!1),$(r[0]).prop("checked",!0),r.on("click",function(){t.find("input[type=checkbox]").prop("checked",!1),$(this).prop("checked",!0)}),t.find("div[id=acoSave]").unbind().on("click",function(){a(e)})},a=function(e){for(var r,n=t.find("input[type=checkbox]"),a=0;a<n.length;a++)1==$(n[a]).prop("checked")&&(r=$(n[a]).attr("title"));return void 0==r||null==r||""==r?void EPC.alertFucWithTime(1500,"请选择取消原因!"):"其他"==r&&(r=t.find("input[id=acoOtherReason]").val().trim(),""==r)?void EPC.alertFucWithTime(1500,"请填写具体原因!"):void(1==confirm("您确定要取消吗？")&&o(e,r))},o=function(e,r){var n={orderSn:e,cancelReason:r};Ajax.post({url:"/buy/order/cancelOrder",data:n,success:function(e){e.success?(CANCEL_ORDER.closeAlert(t),LayerUtil.msgFun("订单取消成功",function(){$.isFunction(CANCEL_ORDER.callback)&&CANCEL_ORDER.callback()})):LayerUtil.msg(e.message)}})};return{closeAlert:function(t){e(t)},alertCancelOrder:function(e){return null==e?!1:void r(e)},callback:void 0}}(),ADAPTIVE_CAR=function(){var e=function(e){JqUI.loading($("#alert_adaptive_car")),JqAjax.get("/shopping/getCarForGoods",function(e){e.success?$("#carForGoods").html(template("carForGoodsTemplate",{dataList:e.data})):$("#carForGoods").html(template("noCarForGoodsTemplate")),JqUI.unblockUI($("#alert_adaptive_car"))},{goodsId:e})},t=function(e){JqUI.loading($("#alert_adaptive_car")),JqAjax.get("/shopping/getCarForGoodsByOeNum",function(e){e.success?$("#carForGoods").html(template("carForGoodsTemplate",{dataList:e.data})):$("#carForGoods").html(template("noCarForGoodsTemplate")),JqUI.unblockUI($("#alert_adaptive_car"))},{oeNum:e})};return{alertAdaptiveCar:function(t){e(t),$("#alert_adaptive_car").modal("show")},alertAdaptiveCarByOeNum:function(e){t(e),$("#alert_adaptive_car").modal("show")}}}(),ORDER_DETAIL=function(){var e=$("body"),t=function(){ImgUtil.init($(".goods-img"),["click"])},r=function(t){EPC.confirmNewFuc("你确定要确认收货吗?",function(){JqUI.blockUI(e),JqAjax.post("/buy/order/confirmReceive",function(t){JqUI.unblockUI(e),t.success?LayerUtil.msgFun("您已确认收货成功",function(){window.location.reload()}):LayerUtil.msg("非常抱歉，确认收货失败")},{orderSn:t})})},n=function(e){CANCEL_ORDER.alertCancelOrder(e),CANCEL_ORDER.callback=function(){window.location.reload()}};return{init:function(){t()},confirmReceive:function(e){void 0!=e&&null!=e&&r(e)},cancelOrder:function(e){void 0!=e&&null!=e&&n(e)}}}();ORDER_DETAIL.init();