!function(){function e(e){return e.replace(b,"").replace(y,",").replace(w,"").replace(x,"").replace(T,"").split(I)}function t(e){return"'"+e.replace(/('|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")+"'"}function n(n,r){function a(e){return p+=e.split(/\n/).length-1,u&&(e=e.replace(/\s+/g," ").replace(/<!--[\w\W]*?-->/g,"")),e&&(e=g[1]+t(e)+g[2]+"\n"),e}function i(t){var n=p;if(c?t=c(t,r):o&&(t=t.replace(/\n/g,function(){return p++,"$line="+p+";"})),0===t.indexOf("=")){var a=f&&!/^=[=#]/.test(t);if(t=t.replace(/^=[=#]?|[\s;]*$/g,""),a){var i=t.replace(/\s*\([^\)]+\)/,"");d[i]||/^(include|print)$/.test(i)||(t="$escape("+t+")")}else t="$string("+t+")";t=g[1]+t+g[2]}return o&&(t="$line="+n+";"+t),v(e(t),function(e){if(e&&!h[e]){var t;t="print"===e?y:"include"===e?w:d[e]?"$utils."+e:$[e]?"$helpers."+e:"$data."+e,x+=e+"="+t+",",h[e]=!0}}),t+"\n"}var o=r.debug,s=r.openTag,l=r.closeTag,c=r.parser,u=r.compress,f=r.escape,p=1,h={$data:1,$filename:1,$utils:1,$helpers:1,$out:1,$line:1},m="".trim,g=m?["$out='';","$out+=",";","$out"]:["$out=[];","$out.push(",");","$out.join('')"],b=m?"$out+=text;return $out;":"$out.push(text);",y="function(){var text=''.concat.apply('',arguments);"+b+"}",w="function(filename,data){data=data||$data;var text=$utils.$include(filename,data,$filename);"+b+"}",x="'use strict';var $utils=this,$helpers=$utils.$helpers,"+(o?"$line=0,":""),T=g[0],I="return new String("+g[3]+");";v(n.split(s),function(e){e=e.split(l);var t=e[0],n=e[1];1===e.length?T+=a(t):(T+=i(t),n&&(T+=a(n)))});var k=x+T+I;o&&(k="try{"+k+"}catch(e){throw {filename:$filename,name:'Render Error',message:e.message,line:$line,source:"+t(n)+".split(/\\n/)[$line-1].replace(/^\\s+/,'')};}");try{var L=new Function("$data","$filename",k);return L.prototype=d,L}catch(E){throw E.temp="function anonymous($data,$filename) {"+k+"}",E}}var r=function(e,t){return"string"==typeof t?m(t,{filename:e}):o(e,t)};r.version="3.0.0",r.config=function(e,t){a[e]=t};var a=r.defaults={openTag:"<%",closeTag:"%>",escape:!0,cache:!0,compress:!1,parser:null},i=r.cache={};r.render=function(e,t){return m(e,t)};var o=r.renderFile=function(e,t){var n=r.get(e)||h({filename:e,name:"Render Error",message:"Template not found"});return t?n(t):n};r.get=function(e){var t;if(i[e])t=i[e];else if("object"==typeof document){var n=document.getElementById(e);if(n){var r=(n.value||n.innerHTML).replace(/^\s*|\s*$/g,"");t=m(r,{filename:e})}}return t};var s=function(e,t){return"string"!=typeof e&&(t=typeof e,"number"===t?e+="":e="function"===t?s(e.call(e)):""),e},l={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},c=function(e){return l[e]},u=function(e){return s(e).replace(/&(?![\w#]+;)|[<>"']/g,c)},f=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},p=function(e,t){var n,r;if(f(e))for(n=0,r=e.length;r>n;n++)t.call(e,e[n],n,e);else for(n in e)t.call(e,e[n],n)},d=r.utils={$helpers:{},$include:o,$string:s,$escape:u,$each:p};r.helper=function(e,t){$[e]=t};var $=r.helpers=d.$helpers;r.onerror=function(e){var t="Template Error\n\n";for(var n in e)t+="<"+n+">\n"+e[n]+"\n\n";"object"==typeof console&&console.error(t)};var h=function(e){return r.onerror(e),function(){return"{Template Error}"}},m=r.compile=function(e,t){function r(n){try{return new l(n,s)+""}catch(r){return t.debug?h(r)():(t.debug=!0,m(e,t)(n))}}t=t||{};for(var o in a)void 0===t[o]&&(t[o]=a[o]);var s=t.filename;try{var l=n(e,t)}catch(c){return c.filename=s||"anonymous",c.name="Syntax Error",h(c)}return r.prototype=l.prototype,r.toString=function(){return l.toString()},s&&t.cache&&(i[s]=r),r},v=d.$each,g="break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined",b=/\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|\s*\.\s*[$\w\.]+/g,y=/[^\w$]+/g,w=new RegExp(["\\b"+g.replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g"),x=/^\d[^,]*|,\d[^,]*/g,T=/^,+|,+$/g,I=/^$|,+/;a.openTag="{{",a.closeTag="}}";var k=function(e,t){var n=t.split(":"),r=n.shift(),a=n.join(":")||"";return a&&(a=", "+a),"$helpers."+r+"("+e+a+")"};a.parser=function(e){e=e.replace(/^\s/,"");var t=e.split(" "),n=t.shift(),a=t.join(" ");switch(n){case"if":e="if("+a+"){";break;case"else":t="if"===t.shift()?" if("+t.join(" ")+")":"",e="}else"+t+"{";break;case"/if":e="}";break;case"each":var i=t[0]||"$data",o=t[1]||"as",s=t[2]||"$value",l=t[3]||"$index",c=s+","+l;"as"!==o&&(i="[]"),e="$each("+i+",function("+c+"){";break;case"/each":e="});";break;case"echo":e="print("+a+");";break;case"print":case"include":e=n+"("+t.join(",")+");";break;default:if(/^\s*\|\s*[\w\$]/.test(a)){var u=!0;0===e.indexOf("#")&&(e=e.substr(1),u=!1);for(var f=0,p=e.split("|"),d=p.length,$=p[f++];d>f;f++)$=k($,p[f]);e=(u?"=":"=#")+$}else e=r.helpers[n]?"=#"+n+"("+t.join(",")+");":"="+e}return e},"function"==typeof define?define(function(){return r}):"undefined"!=typeof exports?module.exports=r:this.template=r}();var LOP=function(){var e=function(e,t,n){void 0==n&&(n=0),$(e).append('<option value="'+n+'">'+t+"</option>"),$(e).select2()},t=function(e,t,n,r){void 0==n&&(n="id"),void 0==r&&(r="name");var a;for(var i in t){var o=t[i][r],s=t[i][n];void 0!=t[i].importInfo&&"进口"==t[i].importInfo&&(o="进口 "+t[i][r]),a=$("<option></option>"),a.val(s),a.text(o),$(e).append(a)}},n=function(e){void 0!=$(e)&&null!=$(e)&&$(e).modal("hide")};return{default_select:e,append_option:t,closeAlert:function(e){n(e)}}}(),parentWindow=window.parent.document.getElementById("expand_bottom_iframe");void 0!==parentWindow&&$("body").css("height",$(parentWindow).height()+"px");var REQUIREMENTS=function(){var e=function(){t(),o(),$(".refresh").on("click",function(){location.reload()})},t=function(){$("#tab1").find("span").on("click",function(){return $(this).hasClass("choose")?!1:($(this).addClass("choose").siblings().removeClass("choose"),void s($(this).text(),$(this).data("seller-id")))})},n=function(){$(".img-click").on("click",function(){var e=$(this).attr("src");TimIframeUtil.alertImg(e)})},r=function(e,t){$("#moreInfoBt").on("click",function(){$("#mylist").hide(),$("#basicModal").modal("show"),$("#more").html(template("moreInfoTemplate",{text:"【"+e+"】对需求单进行了配件补充，具体如下",list:t}))})},a=function(e,t){$(".hasPrice").on("click",function(){var r=$(this).parent("tr").html();r="<tr>"+l(r)+"</tr>",$(".mylist").html(r),$("#mylist").show(),$("#basicModal").modal("show"),$("#more").html(template("moreInfoTemplate",{text:"【"+e+"】的报价",list:t}));var a=$(this).parent("tr").attr("id");$("#moreInfor tbody tr").each(function(){var e=$(this).data("id");e!=a&&$(this).remove()}),n()})},i=function(e){var n=e.wish_list;if(!(void 0==n||n.length<=0)){var r,a=e.to_sys_id;r={chatObjectId:a,snList:n},JqAjax.postJson("/monkChat/cacheWishSn",function(e){var n="",r=$("#tab1").find("span").length;if(e.success){var i=e.data.length;if(i>0){for(var s=0;i>s;s++)n+='<span class="order-num-span" data-seller-id="'+a+'">'+e.data[s]+"</span>";0==r&&$("#tab1").html(""),$("#tab1").append(n),t(),o()}}},JSON.stringify(r))}},o=function(){var e=$("#tab1").find("span");if(0!=e.length){var t=$(e[0]);s(t.text(),t.data("seller-id"))}},s=function(e,t){var i=$(".content-div");JqUI.loading(i),JqAjax.get("/monkChat/groupedWishInfo",function(e){if(e.success){var t=e.data;$("#detailDiv").html(template("detailTemplate",t));var o=t.goodsBOList,s=t.wishListVO.goodsList,l=t.wishListVO.status,c=[],u=[];for(var f in o)c.push(o[f].groupId);for(var f in s)u.push(s[f].groupId);for(var p=0;p<u.length;p++)c.indexOf(u[p])>=0?"XQRBJ"==l||"XYQX"==l||"BYQX"==l?$("#"+u[p]).find(".statusTxt").text("已报价"):$("#"+u[p]).find(".statusTxt").addClass("hasPrice").text("已报价"):$("#"+u[p]).find(".statusTxt").text("未报价");var d=t.wishListVO.statusDesc,h=t.sellerNum,m=t.status,v="";v="XDBJ"==l?d+"("+t.wishListVO.sellerList.length+"人将进行报价)":"XYBJ"==l?d+"(已被"+h+"人报价，当前联系人"+m+")":"XQRBJ"==l?m:"已取消",$("#orderStatus").text(v),r(t.sellerName,t.suppleGoodsList),a(t.sellerName,t.goodsBOList),n()}else $("#detailDiv").html(template("msgTemplate",{msg:e.message}));JqUI.unblockUI(i)},{wishListSn:e,sellerId:t})},l=function(e){return e=e.replace(/\<td class="statusTxt.*\<\/td>/g,"")};return{init:function(){TimIframeUtilForLOP.todayWishList(i),e()}}}();REQUIREMENTS.init();