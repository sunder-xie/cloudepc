function changeSearchType(e,r){TipUtil.removeTip();var a=$("#car-type-search-input");switch(a.val(""),$(".choose-style").removeClass("choose-style"),$(r).addClass("choose-style"),e){case 0:a.unbind("keyup"),a.attr("placeholder",_keywordSearchPlaceholder),a.removeAttr("maxlength");break;case 1:a.unbind("keyup").on("keyup",function(){$(this).val($(this).val().replace(/[\u4E00-\u9FA5]/g,""))}),a.attr("placeholder",_oeSearchPlaceholder),a.removeAttr("maxlength");break;default:a.unbind("keyup").on("keyup",function(){$(this).val($(this).val().replace(/[\u4E00-\u9FA5]/g,""))}),a.attr("placeholder",_vinSearchPlaceholder),a.attr("maxlength",_vinLength)}a.focus()}function carSearch(){var e=$("#car-type-search-input");TipUtil.destroyTip(e);var r=Number($(".choose-style").attr("data-type")),a=e.val().trim();if(0==r){if(""==a)return TipUtil.tooltipFun(e,_keywordSearchTip,"bottom"),!1;window.location.href="/autoParts/goods/keyword?q="+a}if(1==r){if(""==a)return TipUtil.tooltipFun(e,_oeSearchTip,"bottom"),!1;window.location.href="/autoParts/goods/oe?oem="+a}if(2==r){if(a=a.toUpperCase(),!EPC.isVin(a))return TipUtil.tooltipFun(e,_vinSearchTip,"bottom"),!1;JqAjax.post("/epc/car/getOnlineCarByVin",getVinResult,{vin:a})}}function getVinResult(e){var r=$("#car-type-search-input").val().trim(),a="/autoParts/category/category?carId=CARID&vinNumber="+r;if(e.success){var t=e.data;if(1==t.length)window.location.href=a.replace("CARID",t[0].id)+"&seriesId="+t[0].seriesId;else{var n=template("choose_car_template",{list:t});EPC.alertFuc(n),$(".choose_car").unbind("click").click(function(){var e=$(this).attr("data-id"),r=$(this).attr("data-sid");window.location.href=a.replace("CARID",e)+"&seriesId="+r})}}else EPC.alertFuc("很抱歉，未查询到您提交的车辆信息。");return!1}function getCarModelForFilter(){var e=$("body");JqUI.loading(e);var r=$("#seriesId").val();JqAjax.get("/epc/car/carModelForFilter",function(r){var a=r.data[0];$("#carTypeInfoHeader").html(template("carInfoHeaderTemplate",a)),$("#carStyle").html(template("carStyleTemplate",r));var t=$("#changeCarModel li:first span");if(t.addClass("choice-li"),1==r.data.length)handleCarArray(a.customAttr);else{JqUI.loading(e);var n=a.id;JqAjax.get("/epc/car/carListForFilter",function(r){r.success&&handleCarArray(r.data),JqUI.unblockUI(e)},{modelId:n})}JqUI.unblockUI(e)},{seriesId:r})}function handleCarArray(e){_carArray=e,_tempArray=e,_powerMap={},_yearMap={},_nameArray=[],_powerArray=[],$.each(e,function(e,r){void 0==_powerMap[r.power]&&(_powerMap[r.power]={},_powerArray.push(r.power)),_powerMap[r.power][r.year]=1,void 0==_yearMap[r.year]&&(_yearMap[r.year]={}),_yearMap[r.year][r.power]=1,_nameArray.push(r)}),_powerArray.sort(),$("#carYear").html(template("carYearTemplate",{data:_yearMap})),$("#carPower").html(template("carPowerTemplate",{data:_powerArray})),$("#car-choice").html(template("carChoiceTemplate",{carList:_nameArray}))}function carFilter(){var e=$("#changeCarYear .choice-li").text(),r=$("#changeCarPower .choice-li").text();return""==r?""==e?_carArray:_tempArray=$.grep(_carArray,function(r,a){return r.year==e}):_tempArray=""==e?$.grep(_carArray,function(e,a){return e.power==r}):$.grep(_carArray,function(a,t){return a.year==e&&a.power==r})}function carInfoSearch(e){var r=$(e).attr("id");$("#choiceCarCompare span").removeClass("choice-li"),$(e).addClass("choice-li"),window.location.href="/autoParts/category/category?carId="+r}function changeCarModel(e){$("#changeCarModel span").removeClass("choice-li"),$(e).addClass("choice-li");var r=$(e).prop("title");JqAjax.get("/epc/car/carListForFilter",function(e){e.success&&handleCarArray(e.data)},{modelId:r})}function changeCarYear(e){$("#changeCarYear span").removeClass("choice-li"),$(e).addClass("choice-li");var r=[],a=$(e).text();$.each(_yearMap,function(e,t){a==e&&$.each(t,function(e,a){r.push(e)})}),$("#carPower").html(template("carPowerTemplate",{data:r})),$("#car-choice").html(template("carChoiceTemplate",{carList:carFilter()}))}function changeCarPower(e){$("#changeCarPower span").removeClass("choice-li"),$(e).addClass("choice-li"),$("#car-choice").html(template("carChoiceTemplate",{carList:carFilter()}))}function choiceCarCompare(e){$("#choiceCarCompare span").removeClass("choice-li"),$(e).addClass("choice-li"),$("#compare").addClass("choice-li")}!function(){function e(e){return e.replace(v,"").replace(w,",").replace(C,"").replace(_,"").replace(b,"").split(A)}function r(e){return"'"+e.replace(/('|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")+"'"}function a(a,t){function n(e){return h+=e.split(/\n/).length-1,p&&(e=e.replace(/\s+/g," ").replace(/<!--[\w\W]*?-->/g,"")),e&&(e=g[1]+r(e)+g[2]+"\n"),e}function o(r){var a=h;if(s?r=s(r,t):c&&(r=r.replace(/\n/g,function(){return h++,"$line="+h+";"})),0===r.indexOf("=")){var n=u&&!/^=[=#]/.test(r);if(r=r.replace(/^=[=#]?|[\s;]*$/g,""),n){var o=r.replace(/\s*\([^\)]+\)/,"");d[o]||/^(include|print)$/.test(o)||(r="$escape("+r+")")}else r="$string("+r+")";r=g[1]+r+g[2]}return c&&(r="$line="+a+";"+r),y(e(r),function(e){if(e&&!$[e]){var r;r="print"===e?w:"include"===e?C:d[e]?"$utils."+e:f[e]?"$helpers."+e:"$data."+e,_+=e+"="+r+",",$[e]=!0}}),r+"\n"}var c=t.debug,i=t.openTag,l=t.closeTag,s=t.parser,p=t.compress,u=t.escape,h=1,$={$data:1,$filename:1,$utils:1,$helpers:1,$out:1,$line:1},m="".trim,g=m?["$out='';","$out+=",";","$out"]:["$out=[];","$out.push(",");","$out.join('')"],v=m?"$out+=text;return $out;":"$out.push(text);",w="function(){var text=''.concat.apply('',arguments);"+v+"}",C="function(filename,data){data=data||$data;var text=$utils.$include(filename,data,$filename);"+v+"}",_="'use strict';var $utils=this,$helpers=$utils.$helpers,"+(c?"$line=0,":""),b=g[0],A="return new String("+g[3]+");";y(a.split(i),function(e){e=e.split(l);var r=e[0],a=e[1];1===e.length?b+=n(r):(b+=o(r),a&&(b+=n(a)))});var k=_+b+A;c&&(k="try{"+k+"}catch(e){throw {filename:$filename,name:'Render Error',message:e.message,line:$line,source:"+r(a)+".split(/\\n/)[$line-1].replace(/^\\s+/,'')};}");try{var T=new Function("$data","$filename",k);return T.prototype=d,T}catch(x){throw x.temp="function anonymous($data,$filename) {"+k+"}",x}}var t=function(e,r){return"string"==typeof r?m(r,{filename:e}):c(e,r)};t.version="3.0.0",t.config=function(e,r){n[e]=r};var n=t.defaults={openTag:"<%",closeTag:"%>",escape:!0,cache:!0,compress:!1,parser:null},o=t.cache={};t.render=function(e,r){return m(e,r)};var c=t.renderFile=function(e,r){var a=t.get(e)||$({filename:e,name:"Render Error",message:"Template not found"});return r?a(r):a};t.get=function(e){var r;if(o[e])r=o[e];else if("object"==typeof document){var a=document.getElementById(e);if(a){var t=(a.value||a.innerHTML).replace(/^\s*|\s*$/g,"");r=m(t,{filename:e})}}return r};var i=function(e,r){return"string"!=typeof e&&(r=typeof e,"number"===r?e+="":e="function"===r?i(e.call(e)):""),e},l={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},s=function(e){return l[e]},p=function(e){return i(e).replace(/&(?![\w#]+;)|[<>"']/g,s)},u=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},h=function(e,r){var a,t;if(u(e))for(a=0,t=e.length;t>a;a++)r.call(e,e[a],a,e);else for(a in e)r.call(e,e[a],a)},d=t.utils={$helpers:{},$include:c,$string:i,$escape:p,$each:h};t.helper=function(e,r){f[e]=r};var f=t.helpers=d.$helpers;t.onerror=function(e){var r="Template Error\n\n";for(var a in e)r+="<"+a+">\n"+e[a]+"\n\n";"object"==typeof console&&console.error(r)};var $=function(e){return t.onerror(e),function(){return"{Template Error}"}},m=t.compile=function(e,r){function t(a){try{return new l(a,i)+""}catch(t){return r.debug?$(t)():(r.debug=!0,m(e,r)(a))}}r=r||{};for(var c in n)void 0===r[c]&&(r[c]=n[c]);var i=r.filename;try{var l=a(e,r)}catch(s){return s.filename=i||"anonymous",s.name="Syntax Error",$(s)}return t.prototype=l.prototype,t.toString=function(){return l.toString()},i&&r.cache&&(o[i]=t),t},y=d.$each,g="break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined",v=/\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|\s*\.\s*[$\w\.]+/g,w=/[^\w$]+/g,C=new RegExp(["\\b"+g.replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g"),_=/^\d[^,]*|,\d[^,]*/g,b=/^,+|,+$/g,A=/^$|,+/;n.openTag="{{",n.closeTag="}}";var k=function(e,r){var a=r.split(":"),t=a.shift(),n=a.join(":")||"";return n&&(n=", "+n),"$helpers."+t+"("+e+n+")"};n.parser=function(e){e=e.replace(/^\s/,"");var r=e.split(" "),a=r.shift(),n=r.join(" ");switch(a){case"if":e="if("+n+"){";break;case"else":r="if"===r.shift()?" if("+r.join(" ")+")":"",e="}else"+r+"{";break;case"/if":e="}";break;case"each":var o=r[0]||"$data",c=r[1]||"as",i=r[2]||"$value",l=r[3]||"$index",s=i+","+l;"as"!==c&&(o="[]"),e="$each("+o+",function("+s+"){";break;case"/each":e="});";break;case"echo":e="print("+n+");";break;case"print":case"include":e=a+"("+r.join(",")+");";break;default:if(/^\s*\|\s*[\w\$]/.test(n)){var p=!0;0===e.indexOf("#")&&(e=e.substr(1),p=!1);for(var u=0,h=e.split("|"),d=h.length,f=h[u++];d>u;u++)f=k(f,h[u]);e=(p?"=":"=#")+f}else e=t.helpers[a]?"=#"+a+"("+r.join(",")+");":"="+e}return e},"function"==typeof define?define(function(){return t}):"undefined"!=typeof exports?module.exports=t:this.template=t}();var storage=window.sessionStorage,key="autoParts_crumbs";$(function(){var e="";switch(Number($(".choose-style").attr("data-type"))){case 1:e=_oeSearchPlaceholder;break;case 2:e=_vinSearchPlaceholder;break;default:e=_keywordSearchPlaceholder}$("#car-type-search-input").bind("keypress",function(e){13==e.keyCode&&$("#car-type-head-searchBtn").trigger("click")}).attr("placeholder",e)});var _company,_carArray,_powerMap,_yearMap,_powerArray,_nameArray,_tempArray;$(function(){getCarModelForFilter()});