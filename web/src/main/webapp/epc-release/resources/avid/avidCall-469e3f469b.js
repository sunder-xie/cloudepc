function changeSearchType(e,t){TipUtil.removeTip();var a=$("#car-type-search-input");switch(a.val(""),$(".choose-style").removeClass("choose-style"),$(t).addClass("choose-style"),e){case 0:a.unbind("keyup"),a.attr("placeholder",_keywordSearchPlaceholder),a.removeAttr("maxlength");break;case 1:a.unbind("keyup").on("keyup",function(){$(this).val($(this).val().replace(/[\u4E00-\u9FA5]/g,""))}),a.attr("placeholder",_oeSearchPlaceholder),a.removeAttr("maxlength");break;default:a.unbind("keyup").on("keyup",function(){$(this).val($(this).val().replace(/[\u4E00-\u9FA5]/g,""))}),a.attr("placeholder",_vinSearchPlaceholder),a.attr("maxlength",_vinLength)}a.focus()}function carSearch(){var e=$("#car-type-search-input");TipUtil.destroyTip(e);var t=Number($(".choose-style").attr("data-type")),a=e.val().trim();if(0==t){if(""==a)return TipUtil.tooltipFun(e,_keywordSearchTip,"bottom"),!1;window.location.href="/autoParts/goods/keyword?q="+a}if(1==t){if(""==a)return TipUtil.tooltipFun(e,_oeSearchTip,"bottom"),!1;window.location.href="/autoParts/goods/oe?oem="+a}if(2==t){if(a=a.toUpperCase(),!EPC.isVin(a))return TipUtil.tooltipFun(e,_vinSearchTip,"bottom"),!1;JqAjax.post("/epc/car/getOnlineCarByVin",getVinResult,{vin:a})}}function getVinResult(e){var t=$("#car-type-search-input").val().trim(),a="/autoParts/category/category?carId=CARID&vinNumber="+t;if(e.success){var r=e.data;if(1==r.length)window.location.href=a.replace("CARID",r[0].id)+"&seriesId="+r[0].seriesId;else{var n=template("choose_car_template",{list:r});EPC.alertFuc(n),$(".choose_car").unbind("click").click(function(){var e=$(this).attr("data-id"),t=$(this).attr("data-sid");window.location.href=a.replace("CARID",e)+"&seriesId="+t})}}else EPC.alertFuc("很抱歉，未查询到您提交的车辆信息。");return!1}function getCarBrandForFilter(){JqUI.loading(body),Ajax.get({url:"/epc/car/allCarBrandSeries",success:function(e){e.success&&($("#firstWord-li").html(template("carTypeHeaderTemplate",e)),$("#firstWord-li span:first").addClass("backColor"),$("#carTypeBody").html(template("carTypeBodyTemplate",e)),bindClickOnCarModel(),allCarBrandSeriesResult=e),JqUI.unblockUI(body),e.success&&pageGuide()}})}function firstWord(e){$("#firstWord-li span").removeClass("backColor");var t=$(e).attr("id");$(e).addClass("backColor"),$("#carTypeBody").html(template("carTypeBodyTemplate",handleResultMap(allCarBrandSeriesResult,t))),bindClickOnCarModel(),body.animate({scrollTop:avidTipDivTop},500),initAvidCallBtn()}function handleResultMap(e,t){if(-1==t)return e;var a={};return a[t]=e.data[t],{data:a}}function initAvidCallBtn(){layer.closeAll("tips")}function bindClickOnCarModel(){$(".series_name_span").unbind("click").click(function(){$(".series-span-selected").removeClass("series-span-selected");var e=$(this);e.addClass("series-span-selected");var t=(e.position(),$("#avidCallBtnTemplate").html()),a=(layer.tips(t,e,{tips:[1,"#fff"],time:6e5}),$(".layui-layer-tips"));a.addClass("layui-layer-tips-fix"),a.find("i").addClass("hidden");var r=a.css("top");a.css("top",parseInt(r.replace("px",""))+18),$(".avid-call-btn").addClass("hidden"),$(".tip-avid-call-btn").click(function(){submitAvidCall()}),$(".close-avid-btn").click(function(){initAvidCallBtn()})})}function submitAvidCall(){var e=$(".series-span-selected");if(0==e.length)return void LayerUtil.msg("请选择需要急呼的车型");var t=e.attr("data-id");JqUI.loading(body),Ajax.post({url:"/avidCall/create",data:{carSeriesId:t},success:function(e){if(e.success)LayerUtil.msg("配件管家会尽快与您联系，请保持手机畅通，周六日无法提供服务",5e3,function(){$(".series-span-selected").removeClass("series-span-selected"),initAvidCallBtn()});else if(null==e.data)LayerUtil.msg("非常抱歉，急呼失败了，请重试");else{var t='<div style="text-align: left;font-size: 14px;">'+_unOpenCityMsg+"</div>";EPC.alertFuc(t)}JqUI.unblockUI(body)}})}function pageGuide(){var e=parseInt($("#pageUriId").val());if(!isNaN(e)){var t=$(".series_name_span").eq(0),a=t.offset(),r=template("avidCallGuideStep1",{data:t.text()}),n=a.top-98,i=a.left-68;body.block({message:r,centerY:!1,css:{top:n,border:"none",padding:"2px",backgroundColor:"none",cursor:"pointer"},overlayCSS:{backgroundColor:"#000",opacity:.6,cursor:"pointer"}}),$(".blockMsg").css("left",i),$(".blockUI").click(function(){guideStepFun()});var o=a.top/2;body.animate({scrollTop:o},200)}}function guideStepFun(){var e=$(".avid_call_guide_step_1");if(1==e.length){if(void 0!==guideStepToId1)return;guideStepToId1=setTimeout(function(){var e=$(".blockMsg"),t=parseInt(e.css("top").replace("px",""))+34,a=parseInt(e.css("left").replace("px",""))-28;e.html('<img src="/img/lop/avid_call_guide_step2.png">').css({top:t,left:a})},500),addPageGuideRecord()}else void 0===guideStepToId2&&(guideStepToId2=setTimeout(function(){JqUI.unblockUI(body)},500))}function addPageGuideRecord(){$.ajax({url:"/common/addPageGuideRecord",data:{pageUriId:$("#pageUriId").val()},success:function(e){}})}!function(){function e(e){return e.replace(y,"").replace(b,",").replace(T,"").replace(C,"").replace(k,"").split(w)}function t(e){return"'"+e.replace(/('|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")+"'"}function a(a,r){function n(e){return p+=e.split(/\n/).length-1,d&&(e=e.replace(/\s+/g," ").replace(/<!--[\w\W]*?-->/g,"")),e&&(e=m[1]+t(e)+m[2]+"\n"),e}function i(t){var a=p;if(c?t=c(t,r):o&&(t=t.replace(/\n/g,function(){return p++,"$line="+p+";"})),0===t.indexOf("=")){var n=u&&!/^=[=#]/.test(t);if(t=t.replace(/^=[=#]?|[\s;]*$/g,""),n){var i=t.replace(/\s*\([^\)]+\)/,"");f[i]||/^(include|print)$/.test(i)||(t="$escape("+t+")")}else t="$string("+t+")";t=m[1]+t+m[2]}return o&&(t="$line="+a+";"+t),$(e(t),function(e){if(e&&!g[e]){var t;t="print"===e?b:"include"===e?T:f[e]?"$utils."+e:v[e]?"$helpers."+e:"$data."+e,C+=e+"="+t+",",g[e]=!0}}),t+"\n"}var o=r.debug,l=r.openTag,s=r.closeTag,c=r.parser,d=r.compress,u=r.escape,p=1,g={$data:1,$filename:1,$utils:1,$helpers:1,$out:1,$line:1},h="".trim,m=h?["$out='';","$out+=",";","$out"]:["$out=[];","$out.push(",");","$out.join('')"],y=h?"$out+=text;return $out;":"$out.push(text);",b="function(){var text=''.concat.apply('',arguments);"+y+"}",T="function(filename,data){data=data||$data;var text=$utils.$include(filename,data,$filename);"+y+"}",C="'use strict';var $utils=this,$helpers=$utils.$helpers,"+(o?"$line=0,":""),k=m[0],w="return new String("+m[3]+");";$(a.split(l),function(e){e=e.split(s);var t=e[0],a=e[1];1===e.length?k+=n(t):(k+=i(t),a&&(k+=n(a)))});var S=C+k+w;o&&(S="try{"+S+"}catch(e){throw {filename:$filename,name:'Render Error',message:e.message,line:$line,source:"+t(a)+".split(/\\n/)[$line-1].replace(/^\\s+/,'')};}");try{var I=new Function("$data","$filename",S);return I.prototype=f,I}catch(x){throw x.temp="function anonymous($data,$filename) {"+S+"}",x}}var r=function(e,t){return"string"==typeof t?h(t,{filename:e}):o(e,t)};r.version="3.0.0",r.config=function(e,t){n[e]=t};var n=r.defaults={openTag:"<%",closeTag:"%>",escape:!0,cache:!0,compress:!1,parser:null},i=r.cache={};r.render=function(e,t){return h(e,t)};var o=r.renderFile=function(e,t){var a=r.get(e)||g({filename:e,name:"Render Error",message:"Template not found"});return t?a(t):a};r.get=function(e){var t;if(i[e])t=i[e];else if("object"==typeof document){var a=document.getElementById(e);if(a){var r=(a.value||a.innerHTML).replace(/^\s*|\s*$/g,"");t=h(r,{filename:e})}}return t};var l=function(e,t){return"string"!=typeof e&&(t=typeof e,"number"===t?e+="":e="function"===t?l(e.call(e)):""),e},s={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},c=function(e){return s[e]},d=function(e){return l(e).replace(/&(?![\w#]+;)|[<>"']/g,c)},u=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},p=function(e,t){var a,r;if(u(e))for(a=0,r=e.length;r>a;a++)t.call(e,e[a],a,e);else for(a in e)t.call(e,e[a],a)},f=r.utils={$helpers:{},$include:o,$string:l,$escape:d,$each:p};r.helper=function(e,t){v[e]=t};var v=r.helpers=f.$helpers;r.onerror=function(e){var t="Template Error\n\n";for(var a in e)t+="<"+a+">\n"+e[a]+"\n\n";"object"==typeof console&&console.error(t)};var g=function(e){return r.onerror(e),function(){return"{Template Error}"}},h=r.compile=function(e,t){function r(a){try{return new s(a,l)+""}catch(r){return t.debug?g(r)():(t.debug=!0,h(e,t)(a))}}t=t||{};for(var o in n)void 0===t[o]&&(t[o]=n[o]);var l=t.filename;try{var s=a(e,t)}catch(c){return c.filename=l||"anonymous",c.name="Syntax Error",g(c)}return r.prototype=s.prototype,r.toString=function(){return s.toString()},l&&t.cache&&(i[l]=r),r},$=f.$each,m="break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined",y=/\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|\s*\.\s*[$\w\.]+/g,b=/[^\w$]+/g,T=new RegExp(["\\b"+m.replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g"),C=/^\d[^,]*|,\d[^,]*/g,k=/^,+|,+$/g,w=/^$|,+/;n.openTag="{{",n.closeTag="}}";var S=function(e,t){var a=t.split(":"),r=a.shift(),n=a.join(":")||"";return n&&(n=", "+n),"$helpers."+r+"("+e+n+")"};n.parser=function(e){e=e.replace(/^\s/,"");var t=e.split(" "),a=t.shift(),n=t.join(" ");switch(a){case"if":e="if("+n+"){";break;case"else":t="if"===t.shift()?" if("+t.join(" ")+")":"",e="}else"+t+"{";break;case"/if":e="}";break;case"each":var i=t[0]||"$data",o=t[1]||"as",l=t[2]||"$value",s=t[3]||"$index",c=l+","+s;"as"!==o&&(i="[]"),e="$each("+i+",function("+c+"){";break;case"/each":e="});";break;case"echo":e="print("+n+");";break;case"print":case"include":e=a+"("+t.join(",")+");";break;default:if(/^\s*\|\s*[\w\$]/.test(n)){var d=!0;0===e.indexOf("#")&&(e=e.substr(1),d=!1);for(var u=0,p=e.split("|"),f=p.length,v=p[u++];f>u;u++)v=S(v,p[u]);e=(d?"=":"=#")+v}else e=r.helpers[a]?"=#"+a+"("+t.join(",")+");":"="+e}return e},"function"==typeof define?define(function(){return r}):"undefined"!=typeof exports?module.exports=r:this.template=r}();var storage=window.sessionStorage,key="autoParts_crumbs";$(function(){var e="";switch(Number($(".choose-style").attr("data-type"))){case 1:e=_oeSearchPlaceholder;break;case 2:e=_vinSearchPlaceholder;break;default:e=_keywordSearchPlaceholder}$("#car-type-search-input").bind("keypress",function(e){13==e.keyCode&&$("#car-type-head-searchBtn").trigger("click")}).attr("placeholder",e)});var body=$("body"),avidTipDiv=$(".avid-tip-div"),avidTipDivTop=avidTipDiv.get(0).offsetTop,allCarBrandSeriesResult;$(function(){getCarBrandForFilter(),$(".avid-call-btn").click(function(){submitAvidCall()}),$(window).scroll(function(){$(document).scrollTop()>=avidTipDivTop?(avidTipDiv.addClass("fixed"),$("#carTypeBody").css("padding-top",avidTipDiv.height()+20)):(avidTipDiv.removeClass("fixed"),$("#carTypeBody").css("padding-top",0))})});var guideStepToId1,guideStepToId2;